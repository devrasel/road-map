!function(e){"use strict";var t=function(){return{currentView:"questions",road_map:{totalSteps:1,completedSteps:0,selectedSteps:[]}}},a={data:function(){return{}},props:["totalSteps","completedSteps","selectedSteps"],template:road_map_global.template.questions,components:{"radial-progress-bar":RadialProgressBar},methods:{expandQuestionDetails:function(t){return t.preventDefault(),e(t.target).parents(".road_map-question").toggleClass("open"),!1},markComplete:function(t){t.preventDefault();let a=e(t.target).parents(".road_map-question"),s=a.data("id"),n=this.selectedSteps;return e(t.target).is(":checked")?(a.addClass("active"),n.push({id:s})):(a.removeClass("active"),n=n.filter(function(e,t){return e.id!=s})),this.$emit("update:selectedSteps",n),!1},reset:function(t){return t.preventDefault(),e(this.$el).find('input[type="checkbox"]').removeAttr("checked"),e(this.$el).find(".road_map-question").removeClass("active"),this.$emit("update:selectedSteps",[]),!1},markCompleteAll(t){t.preventDefault();let a=this.selectedSteps;return e(this.$el).find('input[type="checkbox"]').attr("checked","checked"),e(this.$el).find(".road_map-question").addClass("active").each(function(t,s){let n=e(s).data("id");0==a.filter(function(e,t){return e.id==n}).length&&a.push({id:n})}),this.$emit("update:selectedSteps",a),Swal.fire({type:"success",text:"Mission has been completed!",showConfirmButton:!0,allowOutsideClick:!1}).then(function(e){}),!1}}},s={data:function(){return{}},props:["percent_complete"],template:road_map_global.template.complete};e(document).ready(function(){new Vue({el:"#"+road_map_global.prefix,data:t,computed:{selectedSteps:function(){return this.road_map.selectedSteps}},watch:{selectedSteps:function(){this.$set(this.road_map,"completedSteps",parseInt(this.road_map.selectedSteps.length)),e.ajax({url:road_map_global.ajax_url,type:"POST",dataType:"JSON",data:{action:road_map_global.prefix+"_save",selectedSteps:this.road_map.selectedSteps},beforeSend:function(){}}).done(function(e){})}},methods:{beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e);e.style.height=this.prevHeight,setTimeout(function(){e.style.minHeight=t,e.style.height="auto"})},afterEnter:function(e){e.style.height="auto"}},mounted:function(){let t=e(this.$el),a=this;e.ajax({url:road_map_global.ajax_url,type:"POST",dataType:"JSON",data:{action:road_map_global.prefix+"_load"},beforeSend:function(){}}).done(function(e){if(a.$set(a.road_map,"selectedSteps",e.data),e.data.length>0)for(var s in e.data){let a=e.data[s].id;t.find('.road_map-question[data-id="'+a+'"]').addClass("active").find('input[type="checkbox"]').attr("checked","checked")}}),a.$set(a.road_map,"totalSteps",parseInt(t.find(".road_map-question").length))},components:{questions:a,complete:s}})})}(jQuery);